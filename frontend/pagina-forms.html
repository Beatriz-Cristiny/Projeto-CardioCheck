<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cardio Check - Avaliação de Risco</title>
    <link rel="stylesheet" href="style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <header>
      <img src="./LogoCardioCheck.svg" alt="Logo Cardio Check" />
    </header>

    <div id="quiz-container">
      <div id="progress-indicator">
        <span class="progress-text"></span>
        <div class="progress-bar-container">
          <div class="progress-bar"></div>
        </div>
      </div>

      <!-- FORM PRINCIPAL -->
      <form id="multi-step-form">
        
        <!-- STEP 1 -->
        <section class="step active" id="step-1" data-step="1">
          <h2>1. Seu Perfil e Histórico</h2>
          <p>Preencha os dados abaixo para começarmos sua avaliação.</p>

          <div class="form-group">
            <label>Sexo:</label>
            <div class="radio-group">
              <input
                type="radio"
                id="sex-m"
                name="Sex"
                value="Masculino"
                required
              />
              <label for="sex-m">Masculino</label>

              <input type="radio" id="sex-f" name="Sex" value="Feminino" />
              <label for="sex-f">Feminino</label>
            </div>
          </div>

          <div class="form-group toggle-group">
            <label for="family-history">Histórico Familiar de Doenças Cardíacas?</label>
            <div class="switch-container">
              <input type="checkbox" id="family-history" name="Family History" value="1" />
              <label for="family-history" class="toggle-switch"></label>
            </div>
            <span class="switch-label">Não / Sim</span>
          </div>

          <div class="form-group toggle-group">
            <label for="prev-problems">Já teve Problemas Cardíacos?</label>
            <div class="switch-container">
              <input type="checkbox" id="prev-problems" name="Previous Heart Problems" value="1" />
              <label for="prev-problems" class="toggle-switch"></label>
            </div>
            <span class="switch-label">Não / Sim</span>
          </div>

          <div class="form-group toggle-group">
            <label for="medication-use">Usa Medicação para Pressão/Colesterol?</label>
            <div class="switch-container">
              <input type="checkbox" id="medication-use" name="Medication Use" value="1" />
              <label for="medication-use" class="toggle-switch"></label>
            </div>
            <span class="switch-label">Não / Sim</span>
          </div>

          <div class="form-group toggle-group">
            <label for="diabetes">Possui Diabetes?</label>
            <div class="switch-container">
              <input type="checkbox" id="diabetes" name="Diabetes" value="1" />
              <label for="diabetes" class="toggle-switch"></label>
            </div>
            <span class="switch-label">Não / Sim</span>
          </div>

          <div class="button-container">
            <button type="button" onclick="handleStepSubmission(1)">Prosseguir</button>
          </div>
        </section>

        <!-- STEP 2 -->
        <section class="step" id="step-2" data-step="2" style="display: none">
          <h2>2. Suas Medidas de Saúde</h2>

          <div class="form-group">
            <label for="blood-pressure-sys">Pressão Arterial (mmHg):</label>
            <div class="input-pair">
              <input type="number" id="blood-pressure-sys" name="Systolic" placeholder="Sistólica" min="80" max="200" required />
              /
              <input type="number" id="blood-pressure-dia" name="Diastolic" placeholder="Diastólica" min="40" max="120" required />
            </div>
            <small>Ex: 120/80 mmHg</small>
          </div>

          <div class="form-group">
            <label for="bmi">Seu IMC (Índice de Massa Corporal):</label>
            <input type="number" step="0.1" id="bmi" name="BMI" min="15" max="50" required />
            <small>Ex: 24.5</small>
          </div>

          <!-- ❌ REMOVIDO: HEART RATE -->

          <div class="button-container">
            <button type="button" onclick="handleStepSubmission(2, false)">Voltar</button>
            <button type="button" onclick="handleStepSubmission(2)">Prosseguir</button>
          </div>
        </section>

        <!-- STEP 3 -->
        <section class="step" id="step-3" data-step="3" style="display: none">
          <h2>3. Seu Estilo de Vida</h2>

          <div class="form-group">
            <label for="smoking">Hábito de Fumar:</label>
            <select id="smoking" name="Smoking" required>
              <option value="">Selecione...</option>
              <option value="0">Não Fuma</option>
              <option value="1">Fumante</option>
            </select>
          </div>

          <div class="form-group">
            <label for="alcohol">Consumo de Álcool:</label>
            <select id="alcohol" name="Alcohol Consumption" required>
              <option value="">Selecione...</option>
              <option value="0">Nunca</option>
              <option value="1">Ocasionalmente (1-2x/semana)</option>
              <option value="2">Regularmente (3-5x/semana)</option>
              <option value="3">Diariamente</option>
            </select>
          </div>

          <div class="form-group">
            <label for="diet">Qualidade da Alimentação:</label>
            <select id="diet" name="Diet_Healthy" required>
              <option value="">Selecione...</option>
              <option value="0">Pouco Saudável (fast food, processados)</option>
              <option value="1">Moderadamente Saudável</option>
              <option value="2">Muito Saudável (frutas, vegetais, integral)</option>
            </select>
          </div>

          <div class="button-container">
            <button type="button" onclick="handleStepSubmission(3, false)">Voltar</button>
            <button type="button" onclick="handleStepSubmission(3)">Prosseguir</button>
          </div>
        </section>

        <!-- STEP 4 -->
        <section class="step" id="step-4" data-step="4" style="display: none">
          <h2>4. Seus Hábitos Diários</h2>

          <div class="form-group">
            <label for="activity-days">Dias de Atividade Física por Semana:</label>
            <input type="number" id="activity-days" name="Physical Activity Days Per Week" min="0" max="7" required />
            <small>Quantos dias você se exercita por pelo menos 30 minutos</small>
          </div>

          <div class="form-group">
            <label for="sleep-hours">Horas de Sono Por Dia:</label>
            <input type="number" id="sleep-hours" name="Sleep Hours Per Day" min="3" max="12" step="0.5" required />
            <small>Média de horas de sono por noite</small>
          </div>

          <div class="form-group">
            <label for="stress-level">Nível de Estresse (1–10):</label>
            <input type="range" id="stress-level" name="Stress Level" min="1" max="10" step="1" oninput="stressValue.innerText = this.value" />
            <p>Nível atual: <span id="stressValue">5</span></p>
            <small>1 = Muito tranquilo, 10 = Muito estressado</small>
          </div>

          <div class="button-container">
            <button type="button" onclick="handleStepSubmission(4, false)">Voltar</button>
            <button type="button" class="final-submit" onclick="handleFinalSubmission()">
              Obter Meu Resultado
            </button>
          </div>
        </section>
      </form>

      <!-- RESULTADOS -->
      <section id="results" style="display: none">
        <h2>Seu Resultado de Risco Cardiovascular</h2>
        <canvas id="risk-chart" width="300" height="300"></canvas>
        <div id="result-text"></div>
        <button onclick="window.location.reload()">Refazer Avaliação</button>
      </section>
    </div>

    <script src="script.js"></script>
  </body>
</html>